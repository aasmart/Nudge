<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title class="app-name"></title>
    <link rel="stylesheet" href="./assets/style.css">
    <link rel="stylesheet" href="./assets/style-reminder-form.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body class="preload">
    <header class="titlebar">
        <img src="./assets/icon.png">
        <p class="app-name"></p>
    </header>

    <dialog id="popup">
        <h2 class="title">Title</h2>
        <p class="content"></p>
        <form></form>
    </dialog>

    <nav>
        <div class="nav__sidebar">
            <fieldset class="nav__app-fieldset">
                <label class="svg-radio" for="home-radio" title="Home">
                    <input type="radio" id="home-radio" class="nav__app-tab" name="app-nav" value="index">
                    <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M160-120v-480l320-240 320 240v480H560v-280H400v280H160Z"/></svg>
                </label>
                <label class="svg-radio" for="reminder-radio" title="Create a Nudge">
                    <input type="radio" id="reminder-radio" class="nav__app-tab" name="app-nav" value="reminder">
                    <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M160-200v-60h80v-304q0-84 49.5-150.5T420-798v-22q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v22q81 17 130.5 83.5T720-564v304h80v60H160ZM480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80Zm-30-288h60v-84h84v-60h-84v-84h-60v84h-84v60h84v84Z"/></svg>
                </label>
                <label class="svg-radio" for="settings-radio" title="Settings">
                    <input type="radio" id="settings-radio" class="nav__app-tab" name="app-nav" value="settings">
                    <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
                        <path d="m388-80-20-126q-19-7-40-19t-37-25l-118 54-93-164 108-79q-2-9-2.5-20.5T185-480q0-9 .5-20.5T188-521L80-600l93-164 118 54q16-13 37-25t40-18l20-127h184l20 126q19 7 40.5 18.5T669-710l118-54 93 164-108 77q2 10 2.5 21.5t.5 21.5q0 10-.5 21t-2.5 21l108 78-93 164-118-54q-16 13-36.5 25.5T592-206L572-80H388Zm92-270q54 0 92-38t38-92q0-54-38-92t-92-38q-54 0-92 38t-38 92q0 54 38 92t92 38Z"/>
                    </svg>
                </label>
            </fieldset>
        </div>
    </nav>
    
    <main class="preload center-horizontal">
        <form action="" method="" class="reminder-form">
            <div title="The title displayed when the reminder is sent" class="input-container-grid">
                <label for="title">Reminder Title</label>
                <input type="text" minlength="1" maxlength="32" id="title" name="title" placeholder=" " required>
            </div>

            <div title="The message sent with the reminder" class="input-container-grid">
                <label for="message">Reminder Message</label>
                <textarea cols="40" rows = "10" id="message" name="message"></textarea>
            </div>
            
            <div title="The amount of time between each reminder" class="input-container-grid">
                <label for="reminder-interval-amount">Reminder Interval</label>
                <input type="number" 
                        step="0.01" 
                        id="reminder-interval-amount" 
                        name="reminder-interval-amount" 
                        placeholder=" "
                        min="0.1"
                        max="34560"
                        required 
                        use-units="time"
                >
            </div>

            <div title="If used, this overrides the duration until the first reminder plays" class="input-container-grid">
                <!-- <input type="checkbox" id="toggle-reminder-start-override" name="toggle-reminder-start-override" toggles="reminder-start-override-amount"> -->
                <label for="toggle-reminder-start-override">First Reminder Delay Override</label>
                <input type="number" 
                        id="reminder-start-override-amount" 
                        name="reminder-start-override-amount" 
                        step="0.01"  
                        min="0.1"
                        max="34560"
                        use-units="time"
                >
            </div>

            <div title="If used, this determines the duration between an ignored reminder re-sending" class="input-container-grid">
                <!-- <input type="checkbox" id="toggle-ignore-reminder-penalty" name="toggle-ignore-reminder-penalty" toggles="ignored-reminder-interval-amount"> -->
                <label for="toggle-ignore-reminder-penalty">Ignored Reminder Replay Interval</label>
                <input type="number" 
                        id="ignored-reminder-interval-amount" 
                        name="ignored-reminder-interval-amount" 
                        step="0.01" 
                        min="0.1"
                        max="34560"
                        use-units="time"
                >
            </div>

            <div title="The maximum number of times the reminder will replay if ignored. Leave empty for no limit" class="input-container-grid">
                <label for="max-ignored-reminders">Maximum Ignored Reminders</label>
                <input type="number" 
                        id="max-ignored-reminders" 
                        name="max-ignored-reminders" 
                        step="1" 
                        min="1" 
                >
            </div>

            <div class="combobox-wrapper input-container-grid" title="The type of notification sent for the reminder">
                <!-- Accessible select as per the ARIA 1.2 standards: https://www.w3.org/TR/wai-aria-1.2/#combobox -->
                <label for="notification-type">Notification Type</label>
                <div class="combobox--input">
                    <input type="text" 
                        id="notification-type"
                        role="combobox"
                        options-from="reminderNotificationType"
                        aria-haspopup="listbox" 
                        aria-expanded="false"
                        aria-controls="notification-type--listbox" 
                        aria-activedescendant=""
                        aria-autocomplete="list"
                        maxlength="32"
                        required>
    
                    <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
                        <path d="M480-345 240-585l43-43 197 198 197-197 43 43-240 239Z"/>
                    </svg>
                </div>
            
                <div class="listbox-wrapper">
                    <ul role="listbox" id="notification-type--listbox">
                    
                    </ul>
                </div>
            </div>

            <div class="input-container-flex">
                <div class="combobox-wrapper" id="reminder-audio-combobox" title="The audio played when the reminder is sent">
                    <!-- Accessible select as per the ARIA 1.2 standards: https://www.w3.org/TR/wai-aria-1.2/#combobox -->
                    <label for="reminder-audio-id">Reminder Audio</label>
                    <div class="combobox--input">
                        <input type="text" 
                            id="reminder-audio-id"
                            role="combobox"
                            options-from="reminderAudio"
                            aria-haspopup="listbox" 
                            aria-expanded="false"
                            aria-controls="reminder-audio-id--listbox" 
                            aria-activedescendant=""
                            aria-autocomplete="list"
                            maxlength="32"
                            default-selected=""
                            required>
        
                        <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
                            <path d="M480-345 240-585l43-43 197 198 197-197 43 43-240 239Z"/>
                        </svg>
                    </div>
                
                    <div class="listbox-wrapper">
                        <ul role="listbox" id="reminder-audio-id--listbox">
                        
                        </ul>
                    </div>
                </div>
                
                <button class="primary svg-button" id="play-reminder-audio" type="button" title="Play the selected audio">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                         <path d="M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320Z"/>
                     </svg>
                 </button>
                 <button class="primary svg-button" id="upload-reminder-audio" type="button" title="Upload new audio">
                     <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                         <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"/>
                     </svg>
                 </button>
            </div>

            <div title="If enabled, a message will be sent if you're active at your computer if this reminder is paused. Useful if you forget to unpause the reminder. 
                Will be sent only once."
            >
                <input id="paused-activity-notification" name="paused-activity-notification" type="checkbox" />
                <label for="paused-activity-notification">User activity push notification if paused</label>
            </div>

            <div class="input-container-grid">
                <button id="create-reminder" class="primary" when-editing="Update Reminder" type="submit">Create Reminder</button>
                <button id="cancel" action="destructive" type="reset">Cancel</button>
            </div>
        </form>
    </main>

    <script type="module" src="./src/reminder.ts"></script>
    <script type="module" src="./src/nav.ts"></script>
</body>
</html>