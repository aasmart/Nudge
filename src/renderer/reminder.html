<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <title class="app-name"></title>
    <link rel="stylesheet" href="./assets/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <header class="titlebar">
        <img src="./assets/icon.png">
        <p class="app-name"></p>
    </header>

    <dialog id="popup">
        <h2 class="title">Title</h2>
        <p class="content"></p>
        <form>
            <button formmethod="dialog">Close Popup</button>
        </form>
    </dialog>
    
    <main class="preload">
        <form action="" method="" class="reminder-form">
            <div title="The amount of time between each reminder">
                <label for="reminder-interval-amount">Reminder Interval</label>
                <input type="number" 
                        step="0.01" 
                        id="reminder-interval-amount" 
                        name="reminder-interval-amount" 
                        placeholder=" "
                        min="0.1" 
                        required 
                        use-units="time"
                >
            </div>

            <div title="If used, this overrides the duration until the first reminder plays">
                <!-- <input type="checkbox" id="toggle-reminder-start-override" name="toggle-reminder-start-override" toggles="reminder-start-override-amount"> -->
                <label for="toggle-reminder-start-override">First Reminder Delay Override</label>
                <input type="number" 
                        id="reminder-start-override-amount" 
                        name="reminder-start-override-amount" 
                        step="0.01"  
                        min="0.1" 
                        use-units="time"
                >
            </div>

            <div title="If used, this determines the duration between an ignored reminder re-sending">
                <!-- <input type="checkbox" id="toggle-ignore-reminder-penalty" name="toggle-ignore-reminder-penalty" toggles="ignored-reminder-interval-amount"> -->
                <label for="toggle-ignore-reminder-penalty">Ignored Reminder Replay Interval</label>
                <input type="number" 
                        id="ignored-reminder-interval-amount" 
                        name="ignored-reminder-interval-amount" 
                        step="0.01" 
                        min="0.1" 
                        use-units="time"
                >
            </div>

            <div title="The maximum number of times the reminder will replay if ignored. Leave empty for no limit">
                <label for="max-ignored-reminders">Maximum Ignored Reminders</label>
                <input type="number" 
                        id="max-ignored-reminders" 
                        name="max-ignored-reminders" 
                        step="1" 
                        min="1" 
                >
            </div>

            <div class="combobox-wrapper" title="The type of notification sent for the reminder">
                <!-- Accessible select as per the ARIA 1.2 standards: https://www.w3.org/TR/wai-aria-1.2/#combobox -->
                <label for="notification-type">Notification Type</label>
                <div class="combobox--input">
                    <input type="text" 
                        id="notification-type"
                        role="combobox"
                        options-from="reminderNotificationType"
                        aria-haspopup="listbox" 
                        aria-expanded="false"
                        aria-controls="notification-type--listbox" 
                        aria-activedescendant=""
                        aria-autocomplete="list"
                        maxlength="32">
    
                    <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48">
                        <path d="M480-345 240-585l43-43 197 198 197-197 43 43-240 239Z"/>
                    </svg>
                </div>
            
                <div class="listbox-wrapper">
                    <ul role="listbox" id="notification-type--listbox">
                    
                    </ul>
                </div>
            </div>

            <div title="The title displayed when the reminder is sent">
                <label for="title">Reminder Title</label>
                <input type="text" minlength="1" maxlength="32" id="title" name="title" placeholder=" " required>
            </div>

            <div title="The message sent with the reminder">
                <label for="message">Reminder Message</label>
                <textarea cols="40" rows = "10" id="message" name="message"></textarea>
            </div>

            <div>
                <button id="create-reminder" class="primary" when-editing="Update Reminder" type="submit">Create Reminder</button>
                <button id="cancel" action="destructive" type="reset">Cancel</button>
            </div>
            <p><span>*</span> = required</p>
        </form>
    </main>

    <script type="module" src="./src/reminder.ts"></script>
</body>
</html>